RewriteEngine On
RewriteBase /itstock/

# ถ้ามีการเรียกไฟล์ .php ตรง ๆ ให้เปลี่ยนเป็น URL ที่ไม่มี .php (เฉพาะ GET/HEAD)
RewriteCond %{REQUEST_METHOD} =GET [OR]
RewriteCond %{REQUEST_METHOD} =HEAD
RewriteCond %{THE_REQUEST} \s/+(.+?)\.php(?:[\s?]|$) [NC]
RewriteRule ^ /%1 [R=301,L]

# ถ้าเป็นไฟล์/โฟลเดอร์จริง ให้ผ่าน
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# จับ URL ที่ไม่มี .php ให้ไปหาไฟล์ .php
RewriteRule ^(.+)$ $1.php [L]
